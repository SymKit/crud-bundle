{#
    Generic Entity Form Template
    
    Usage from controller:
    return $this->render('@SymkitCrud/crud/entity_form.html.twig', [
        'form' => $form,
        'back_route' => 'admin_list',
        'back_label' => 'Back to list',
        'show_delete' => true,
        'delete_route' => 'admin_delete',
        'delete_route_params' => ['id' => $entity->getId()],
        'entity_id' => $entity->getId(),
        'page_title' => 'Edit Entity',
        'page_description' => 'Manage entity settings.',
    ]);
    
    Or with embed for custom content:
    {% embed '@SymkitCrud/crud/entity_form.html.twig' with {...} %}
        {% block after_form %}
            ... custom content ...
        {% endblock %}
    {% endembed %}
#}

{% extends base_layout %}

{% block page_title %}{{ page_title|default('') }}{% endblock %}
{% block page_description %}{{ page_description|default('') }}{% endblock %}

{% block header_actions %}
    {% if show_back|default(false) %}
        {{ component('BackLink', {
            route: back_route,
            routeParams: back_route_params|default({}),
            label: back_label|default('Back')
        }) }}
    {% endif %}
{% endblock %}

{% block body %}
    {% if show_delete|default(false) %}
        {{ component('DeleteForm', {
            route: delete_route,
            routeParams: delete_route_params|default({}),
            entityId: entity_id,
            formId: 'delete-form',
            confirmMessage: delete_confirm_message|default('Are you sure you want to delete this item?')
        }) }}
    {% endif %}

    {% set extra_nav_items_content %}
        {% block extra_nav_items %}
            {% if extra_nav_items_template is defined and extra_nav_items_template is not null %}
                {{ include(extra_nav_items_template) }}
            {% endif %}
        {% endblock %}
    {% endset %}

    {% embed '@SymkitCrud/form/sectioned_form.html.twig' with {form: form, extra_nav: extra_nav_items_content} %}
        {% block extra_nav_items %}
            {{ extra_nav|raw }}
        {% endblock %}
        {% block form_actions %}
            {% if show_delete|default(false) %}
                <button type="submit" form="delete-form"
                    class="inline-flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-red-600 dark:text-red-400 text-sm font-medium hover:bg-red-50 dark:hover:bg-red-900/20 transition-all cursor-pointer">
                    {{ ux_icon('heroicons:trash-20-solid', {class: 'w-4 h-4'}) }}
                    {{ delete_button_label|default('Supprimer') }}
                </button>
            {% endif %}
            {{ parent() }}
        {% endblock %}
    {% endembed %}

    {% block after_form %}
        {% if after_form_template is defined and after_form_template is not null %}
            {{ include(after_form_template) }}
        {% endif %}
    {% endblock %}
{% endblock %}
